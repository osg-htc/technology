
<!doctype html>
<html lang="en" class="no-js">
  <head>
    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opensciencegrid.org/technology/release/acceptance-testing/">
      
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.4">
    
    
      
        <title>Acceptance Testing - OSG Technology Area</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.358818c7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f0267088.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#acceptance-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://opensciencegrid.org/technology/" title="OSG Technology Area" class="md-header-nav__button md-logo" aria-label="OSG Technology Area">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            OSG Technology Area
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Acceptance Testing
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/opensciencegrid/technology/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://opensciencegrid.org/technology/" title="OSG Technology Area" class="md-nav__button md-logo" aria-label="OSG Technology Area">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Technology Area
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/opensciencegrid/technology/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Software
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Packaging
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Packaging" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon"></span>
        Packaging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/rpm-development-guide/" class="md-nav__link">
      RPM Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/osg-build-tools/" class="md-nav__link">
      OSG Build Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/quilt/" class="md-nav__link">
      Using Quilt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/upcoming-to-main/" class="md-nav__link">
      Upcoming to Main
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-workflow/" class="md-nav__link">
      Koji Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/create-vo-client/" class="md-nav__link">
      Creating the VO Client Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/container-development-guide/" class="md-nav__link">
      Container Development Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/repository-management/" class="md-nav__link">
      Repository Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/globus-mass-update-procedure/" class="md-nav__link">
      Globus Mass Update Procedure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/resurrecting-epel-packages/" class="md-nav__link">
      Resurrecting Epel Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/koji-mass-rebuilds/" class="md-nav__link">
      Koji Mass Rebuilds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Development
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Development" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon"></span>
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/development-process/" class="md-nav__link">
      Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/git-software-development/" class="md-nav__link">
      Git Software Development Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ce-test-scaling/" class="md-nav__link">
      CE Scale Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/ipv6-testing/" class="md-nav__link">
      IPv6 Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/requesting-tokens/" class="md-nav__link">
      How to Request Tokens
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-support/" class="md-nav__link">
      Software Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/effort-tracking/" class="md-nav__link">
      Effort Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/release-planning/" class="md-nav__link">
      Release Planning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/new-team-member/" class="md-nav__link">
      New Team Member
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Release
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Release" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Release
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cut-sw-release/" class="md-nav__link">
      How to Cut a Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cut-data-release/" class="md-nav__link">
      How to Cut a Data Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../announce-rft-packages/" class="md-nav__link">
      Ready for Testing Announcements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../new-release-series/" class="md-nav__link">
      New Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../old-release-removal/" class="md-nav__link">
      Old Release Series Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../itb-testing/" class="md-nav__link">
      ITB Prerelease Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../empty-pkgs/" class="md-nav__link">
      Empty Packages
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Acceptance Testing
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Acceptance Testing
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cvmfs" class="md-nav__link">
    CVMFS
  </a>
  
    <nav class="md-nav" aria-label="CVMFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-repository-server-stratum-0" class="md-nav__link">
    Creating a CVMFS Repository Server (Stratum 0)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-replica-server-stratum-1" class="md-nav__link">
    Creating a CVMFS Replica Server (Stratum 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-client" class="md-nav__link">
    Creating a CVMFS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-oasis-client" class="md-nav__link">
    Creating an OASIS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-documentation" class="md-nav__link">
    Additional Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probe" class="md-nav__link">
    Gratia Probe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gsi-openssh" class="md-nav__link">
    GSI OpenSSH
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-collector-wip" class="md-nav__link">
    HTCondor-CE Collector (WIP)
  </a>
  
    <nav class="md-nav" aria-label="HTCondor-CE Collector (WIP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-collector" class="md-nav__link">
    Setting Up the Collector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-ce" class="md-nav__link">
    Setting Up the CE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsv" class="md-nav__link">
    RSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm" class="md-nav__link">
    Slurm
  </a>
  
    <nav class="md-nav" aria-label="Slurm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-setup" class="md-nav__link">
    Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-job-using-slurm" class="md-nav__link">
    Running a job using slurm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vo-client" class="md-nav__link">
    VO Client
  </a>
  
    <nav class="md-nav" aria-label="VO Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-voms-proxy-init" class="md-nav__link">
    Testing voms-proxy-init
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-voms-testing" class="md-nav__link">
    XRootD VOMS Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdfs" class="md-nav__link">
    HDFS
  </a>
  
    <nav class="md-nav" aria-label="HDFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadoop-name-node-installation" class="md-nav__link">
    Hadoop name node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-configuration" class="md-nav__link">
    Edit Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadoop-data-node-installation" class="md-nav__link">
    Hadoop data node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gridftp-installation" class="md-nav__link">
    GridFTP installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node_1" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-plugins" class="md-nav__link">
    XRootD Plugins
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Policy
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Policy" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Policy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gridftp-gsi-migration/" class="md-nav__link">
      GridFTP and GSI Migration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/campus-cyberinfrastructure/" class="md-nav__link">
      Campus Cyberinfrastructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/cream-support/" class="md-nav__link">
      CREAM-CE Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/release-series/" class="md-nav__link">
      Release Series Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/globus-toolkit/" class="md-nav__link">
      Globus Toolkit Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/external-oasis-repos/" class="md-nav__link">
      OASIS Repository Mirroring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/flexible-release-model/" class="md-nav__link">
      Flexible Release Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/software-release/" class="md-nav__link">
      Software Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/container-release/" class="md-nav__link">
      Container Release Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/community-testing/" class="md-nav__link">
      Community Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/comanage-instructions-user/" class="md-nav__link">
      Registering with the OSG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/comanage-instructions-admin/" class="md-nav__link">
      Approving COManage Registrations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Documentation
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Documentation" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/writing-documentation/" class="md-nav__link">
      Writing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/reviewing-documentation/" class="md-nav__link">
      Reviewing Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/style-guide/" class="md-nav__link">
      Markdown Style Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/new-doc-area/" class="md-nav__link">
      Creating a New Area
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Historical Transitions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Historical Transitions" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Historical Transitions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/service-migrations-spring-2018/" class="md-nav__link">
      Service Migrations - Spring 2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/gums-retire/" class="md-nav__link">
      GUMS Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/bestman2-retire/" class="md-nav__link">
      BeStMan2 Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../policy/voms-admin-retire/" class="md-nav__link">
      VOMS Admin Retirement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/sha2-support/" class="md-nav__link">
      SHA-2 Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documentation/markdown-migration/" class="md-nav__link">
      Migrating Documents to Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Meetings
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Meetings" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Meetings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201109/" class="md-nav__link">
      November 9, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201102/" class="md-nav__link">
      November 2, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201026/" class="md-nav__link">
      October 26, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201019/" class="md-nav__link">
      October 19, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201012/" class="md-nav__link">
      October 12, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20201005/" class="md-nav__link">
      October 5, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200928/" class="md-nav__link">
      September 28, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200914/" class="md-nav__link">
      September 14, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200824/" class="md-nav__link">
      August 24, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200817/" class="md-nav__link">
      August 17, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200810/" class="md-nav__link">
      August 10, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200803/" class="md-nav__link">
      August 3, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200727/" class="md-nav__link">
      July 27, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200720/" class="md-nav__link">
      July 20, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200713/" class="md-nav__link">
      July 13, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200706/" class="md-nav__link">
      July 6, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200629/" class="md-nav__link">
      June 29, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200622/" class="md-nav__link">
      June 22, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200615/" class="md-nav__link">
      June 15, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200608/" class="md-nav__link">
      June 8, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200601/" class="md-nav__link">
      June 1, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200518/" class="md-nav__link">
      May 18, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200511/" class="md-nav__link">
      May 11, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200504/" class="md-nav__link">
      May 4, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200427/" class="md-nav__link">
      April 27, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200420/" class="md-nav__link">
      April 20, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200413/" class="md-nav__link">
      April 13, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200406/" class="md-nav__link">
      April 6, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200330/" class="md-nav__link">
      March 30, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200323/" class="md-nav__link">
      March 23, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200316/" class="md-nav__link">
      March 16, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200309/" class="md-nav__link">
      March 9, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200302/" class="md-nav__link">
      March 2, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200224/" class="md-nav__link">
      February 24, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200217/" class="md-nav__link">
      February 17, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200210/" class="md-nav__link">
      February 10, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200203/" class="md-nav__link">
      February 3, 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200127/" class="md-nav__link">
      January, 27 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200113/" class="md-nav__link">
      January, 13 2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../meetings/2020/TechArea20200106/" class="md-nav__link">
      January, 6 2020
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cvmfs" class="md-nav__link">
    CVMFS
  </a>
  
    <nav class="md-nav" aria-label="CVMFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-repository-server-stratum-0" class="md-nav__link">
    Creating a CVMFS Repository Server (Stratum 0)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-replica-server-stratum-1" class="md-nav__link">
    Creating a CVMFS Replica Server (Stratum 1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-cvmfs-client" class="md-nav__link">
    Creating a CVMFS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-oasis-client" class="md-nav__link">
    Creating an OASIS client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-documentation" class="md-nav__link">
    Additional Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probe" class="md-nav__link">
    Gratia Probe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gsi-openssh" class="md-nav__link">
    GSI OpenSSH
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-collector-wip" class="md-nav__link">
    HTCondor-CE Collector (WIP)
  </a>
  
    <nav class="md-nav" aria-label="HTCondor-CE Collector (WIP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-collector" class="md-nav__link">
    Setting Up the Collector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-the-ce" class="md-nav__link">
    Setting Up the CE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsv" class="md-nav__link">
    RSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm" class="md-nav__link">
    Slurm
  </a>
  
    <nav class="md-nav" aria-label="Slurm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-setup" class="md-nav__link">
    Installation and setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-job-using-slurm" class="md-nav__link">
    Running a job using slurm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vo-client" class="md-nav__link">
    VO Client
  </a>
  
    <nav class="md-nav" aria-label="VO Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-voms-proxy-init" class="md-nav__link">
    Testing voms-proxy-init
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-voms-testing" class="md-nav__link">
    XRootD VOMS Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdfs" class="md-nav__link">
    HDFS
  </a>
  
    <nav class="md-nav" aria-label="HDFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hadoop-name-node-installation" class="md-nav__link">
    Hadoop name node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-configuration" class="md-nav__link">
    Edit Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hadoop-data-node-installation" class="md-nav__link">
    Hadoop data node installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gridftp-installation" class="md-nav__link">
    GridFTP installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-the-name-node_1" class="md-nav__link">
    On the name node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xrootd-plugins" class="md-nav__link">
    XRootD Plugins
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/technology/edit/master/docs/release/acceptance-testing.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="acceptance-testing">Acceptance Testing<a class="headerlink" href="#acceptance-testing" title="Permanent link">&para;</a></h1>
<p>The OSG Release Team collects and maintains testing procedures for major components in the OSG Sofware Stack. These test should verify that basic functionality of the component works in typically deployed configurations.</p>
<h2 id="cvmfs">CVMFS<a class="headerlink" href="#cvmfs" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This acceptance testing recipe was created when access to a machine with sufficient disk space to make a complete replica of OASIS was not available.</p>
</div>
<h3 id="creating-a-cvmfs-repository-server-stratum-0">Creating a CVMFS Repository Server (Stratum 0)<a class="headerlink" href="#creating-a-cvmfs-repository-server-stratum-0" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Disable SELinux by setting the following in <code>/etc/selinux/config</code>.</p>
<div class="codehilite"><pre><span></span><code>SELINUX=disabled
</code></pre></div>

</li>
<li>
<p>Check kernel version.</p>
<div class="codehilite"><pre><span></span><code><span class="go">uname -a</span>
</code></pre></div>

</li>
<li>
<p>CVMFS for EL7 requires OverlayFS (as of kernel version 4.2.x). If default kernel is &lt;= 4.2.x, update kernel.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> rpm --import &lt;https://www.elrepo.org/RPM-GPG-KEY-elrepo.org&gt;
<span class="gp">root@host #</span> rpm -Uvh &lt;http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm&gt;
<span class="gp">root@host #</span> yum install yum-plugin-fastestmirror
<span class="gp">root@host #</span> yum --enablerepo<span class="o">=</span>elrepo-kernel install kernel-ml
</code></pre></div>

</li>
<li>
<p>Select updated kernel by editing <code>/etc/default/grub</code>.</p>
<div class="codehilite"><pre><span></span><code>GRUB_DEFAULT=0
</code></pre></div>

<p>and run:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre></div>

</li>
<li>
<p>Reboot system. </p>
</li>
<li>
<p>Check kernel version again and make sure SELinux is disabled.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> uname -a
<span class="gp">root@host #</span> sestatus
</code></pre></div>

</li>
<li>
<p>If kernel &gt;= 4.2 and SELinux is disabled, then update system and install CVMFS server and client packages.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> yum update
<span class="gp">root@host #</span> yum install epel-release
<span class="gp">root@host #</span> yum install yum-plugin-priorities
<span class="gp">root@host #</span> rpm -Uvh &lt;https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm&gt;
<span class="gp">root@host #</span> yum install cvmfs cvmfs-server
</code></pre></div>

</li>
<li>
<p>Configure web server and start it up. Edit <code>/etc/httpd/conf.d/cvmfs.conf</code>:</p>
<div class="codehilite"><pre><span></span><code>Listen 8000
KeepAlive On
</code></pre></div>

<p>and run:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> chkconfig httpd on
<span class="gp">root@host #</span> service httpd start
</code></pre></div>

</li>
<li>
<p>Make new repository.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> cvmfs_server mkfs test.cvmfs-stratum-0.novalocal
</code></pre></div>

</li>
<li>
<p>Run transaction on new repository to enable write access.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> cvmfs_server transaction test.cvmfs-stratum-0.novalocal
</code></pre></div>

</li>
<li>
<p>Place some sample code in new repository directory and then publish it.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">cd</span> /cvmfs/test.cvmfs-stratum-0.novalocal
<span class="gp">root@host #</span> vi <span class="o">[</span>bash<span class="se">\_</span>pi.sh<span class="o">](</span>%ATTACHURL%/bash_pi.sh<span class="o">)</span>
<span class="gp">root@host #</span> chmod +x bash<span class="se">\_</span>pi.sh
<span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server publish test.cvmfs-stratum-0.novalocal
</code></pre></div>

</li>
<li>
<p>Check repository status after publication.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server check
<span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server tag
<span class="gp">root@host #</span> wget -qO- &lt;http://localhost:8000/cvmfs/test.cvmfs-stratum-0.novalocal/.cvmfswhitelist%7Ccat&gt; -v
</code></pre></div>

</li>
<li>
<p>Download a copy of the CVMFS repository's public key e.g., /etc/cvmfs/keys/test.cvmfs-stratum-0.novalocal.pub</p>
</li>
</ol>
<h3 id="creating-a-cvmfs-replica-server-stratum-1">Creating a CVMFS Replica Server (Stratum 1)<a class="headerlink" href="#creating-a-cvmfs-replica-server-stratum-1" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Repeat steps 1 though 8 in the previous section on "Creating a CVMFS Repository Server ". However, now also install <code>mod_wsgi</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> yum install cvmfs cvmfs-server mod<span class="se">\_</span>wsgi
</code></pre></div>

</li>
<li>
<p>Upload a copy of the CVMFS repository's public key and place in <code>/etc/cvmfs/keys</code> directory. </p>
</li>
<li>
<p>Add replica of the repository.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> cvmfs_server add-replica -o root &lt;http://10.128.3.96:8000/cvmfs/test.cvmfs-stratum-0.novalocal&gt; /etc/cvmfs/keys/test.cvmfs-stratum-0.novalocal.pub
</code></pre></div>

</li>
<li>
<p>Make a snapshot of the repository.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> cvmfs<span class="se">\_</span>server snapshot test.cvmfs-stratum-0.novalocal
</code></pre></div>

</li>
</ol>
<h3 id="creating-a-cvmfs-client">Creating a CVMFS client<a class="headerlink" href="#creating-a-cvmfs-client" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Update system and install CVMFS client package.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> yum update
<span class="gp">root@host #</span> yum install epel-release
<span class="gp">root@host #</span> yum install yum-plugin-priorities
<span class="gp">root@host #</span> rpm -Uvh &lt;https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm&gt;
<span class="gp">root@host #</span> yum install cvmfs
</code></pre></div>

</li>
<li>
<p>Upload a copy of the CVMFS repository's public key and place in <code>/etc/cvmfs/keys</code> directory.</p>
</li>
<li>
<p>Edit fuse configuration <code>/etc/fuse.conf</code>.</p>
<div class="codehilite"><pre><span></span><code>user_allow_other
</code></pre></div>

</li>
<li>
<p>Edit autofs configuration and restart service <code>/etc/auto.master</code>.</p>
<div class="codehilite"><pre><span></span><code>/cvmfs /etc/auto.cvmfs
</code></pre></div>

<p>and run:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> service autofs restart
</code></pre></div>

</li>
<li>
<p>Edit cvmfs configuration (<code>/etc/cvmfs/default.local</code>) to point to replica server.</p>
<div class="codehilite"><pre><span></span><code>CVMFS_SERVER_URL=&quot;http://10.128.3.97:8000/cvmfs/@fqrn@&quot;
CVMFS_REPOSITORIES=&quot;test.cvmfs-stratum-0.novalocal&quot;
CVMFS_HTTP_PROXY=DIRECT
</code></pre></div>

</li>
<li>
<p>Remove OSG CVMFS configuration file.</p>
<div class="codehilite"><pre><span></span><code><span class="go">rm /etc/cvmfs/default.d/60-osg.conf</span>
</code></pre></div>

</li>
<li>
<p>Run CVMFS config probe.</p>
<div class="codehilite"><pre><span></span><code><span class="go">cvmfs_config probe test.cvmfs-stratum-0.novalocal</span>
</code></pre></div>

</li>
<li>
<p>Check CVMFS config status.</p>
<div class="codehilite"><pre><span></span><code><span class="go">cvmfs_config stat -v test.cvmfs-stratum-0.novalocal</span>
</code></pre></div>

</li>
<li>
<p>Execute sample code published to repository from client.</p>
<div class="codehilite"><pre><span></span><code><span class="go">/cvmfs/test.cvmfs-stratum-0.novalocal/bash_pi.sh -b 8 -r 5 -s 10000</span>
</code></pre></div>

</li>
</ol>
<h3 id="creating-an-oasis-client">Creating an OASIS client<a class="headerlink" href="#creating-an-oasis-client" title="Permanent link">&para;</a></h3>
<ol>
<li>Update system and install CVMFS client package.<ul>
<li>yum update</li>
<li>yum install epel-release</li>
<li>yum install yum-plugin-priorities</li>
<li>rpm -Uvh <a href="https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm">https://repo.opensciencegrid.org/osg/3.3/osg-3.3-el7-release-latest.rpm</a></li>
<li>yum install osg-oasis </li>
</ul>
</li>
<li>Verify latest versions of cvmfs, cvmfs-config-osg, and cvmfs-x509-helper have been installed. </li>
<li>Edit fuse configuration.<ul>
<li>vi /etc/fuse.conf<ul>
<li>user_allow_other </li>
</ul>
</li>
</ul>
</li>
<li>Edit cvmfs configuration to point to replica server.<ul>
<li>vi /etc/cvmfs/default.local<ul>
<li>CVMFS_REPOSITORIES="`echo $((echo oasis.opensciencegrid.org;echo cms.cern.ch;ls /cvmfs)|sort -u)|tr ' ' ,`"</li>
<li>CVMFS_QUOTA_LIMIT=20000</li>
<li>CVMFS_HTTP_PROXY=DIRECT</li>
</ul>
</li>
</ul>
</li>
<li>Edit autofs configuration and restart service.<ul>
<li>vi /etc/auto.master<ul>
<li>/cvmfs /etc/auto.cvmfs</li>
</ul>
</li>
<li>service autofs restart</li>
</ul>
</li>
<li>Run CVMFS config probe.<ul>
<li>cvmfs_config probe </li>
</ul>
</li>
<li>Check CVMFS config status.<ul>
<li>cvmfs_config stat -v oasis.opensciencegrid.org</li>
</ul>
</li>
</ol>
<h3 id="additional-documentation">Additional Documentation<a class="headerlink" href="#additional-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://cvmfs.readthedocs.io/en/stable/">CERN's CVMFS Documentation</a></li>
<li><a href="https://www.opensciencegrid.org/docs/other/install-cvmfs-stratum1/">OSG's CVMFS Replica Server</a></li>
<li><a href="https://www.opensciencegrid.org/docs/worker-node/install-cvmfs/">OSG's CVMFS Client Documentation</a></li>
<li>
<p><a href="https://www.opensciencegrid.org/docs/data/external-oasis-repos/">OSG's OASIS Documentation</a></p>
</li>
<li>
<p><a href="../bash_pi.sh">bash_pi.sh</a>: A bash script that uses a simple Monte Carlo method to estimate the value of Pi</p>
</li>
</ul>
<h2 id="gratia-probe">Gratia Probe<a class="headerlink" href="#gratia-probe" title="Permanent link">&para;</a></h2>
<p>This section documents the testing procedure to test the gratia probes sufficiently tested to be promoted to the osg-testing repository. The test procedure is the same on both SL6 and SL7.</p>
<ul>
<li>install or update the <code>gratia-probe-condor</code> rpm as appropriate</li>
<li>On each VM download the gratia-probe-setup.sh script and run it</li>
<li>In <code>/etc/gratia/condor/ProbeConfig</code>, verify the following have been changed:<ul>
<li>change <code>SiteName</code> to something aside from <code>Generic Site</code></li>
<li>change <code>EnableProbe</code> to 1</li>
<li>change <code>CollectorHost</code>, <code>SSLHost</code>, and <code>SSLRegistrationHost</code> to the an invalid host (E.g. test.com) or the localhost</li>
</ul>
</li>
<li>Create <code>/var/lib/osg/</code> and download the attached <code>user-vo-map</code> file and place it in that directory</li>
<li>Edit the <code>user-vo-map</code> file and change the account from <code>sthapa</code> to the account you'll be using to submit the condor jobs in the following step</li>
<li>Download and submit the attached condor_submit file (note, on the default fermicloud VM, this takes about 3 hours, so you may want to set <code>NUM_CPUS</code> to 50 so that 50 jobs will run at a time)</li>
<li>Run <code>/usr/share/gratia/condor/condor_meter</code></li>
<li>Check <code>/var/lib/gratia/tmp/gratiafiles/</code> for a <code>subdir.condor_...</code> directory and verify that there are 200 xml jobs and the cpus/wall times are appropriate (either PT0S or PT1M).</li>
</ul>
<h2 id="gsi-openssh">GSI OpenSSH<a class="headerlink" href="#gsi-openssh" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Fermicloud policy forbids running the GSI OpenSSH server.
You will have to test that part locally.</p>
</div>
<p>To test a fresh installation:</p>
<ol>
<li>Spin up two VM's and set up the EPEL/OSG repos on both of them.</li>
<li>Choose one of the VM's, it will be the server VM. The hostname of this machine will be referenced below as the <code>&lt;SERVER HOSTNAME&gt;</code>
    Consult these <a href="https://www.opensciencegrid.org/docs/other/gsissh/">instructions</a> to set up the server.</li>
<li>
<p>From the other VM (client):</p>
<ol>
<li>
<p>Install the necessary packages:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> yum install globus-proxy-utils gsi-openssh-clients
</code></pre></div>

</li>
<li>
<p>Initialize your proxy. After this, none of the gsi commands should prompt you for your password.</p>
</li>
<li>
<p>Connect to the server:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> gsissh -p <span class="m">2222</span> &lt;SERVER HOSTNAME&gt;
</code></pre></div>

</li>
<li>
<p>Copy a test file to the server:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> gsiscp -p <span class="m">2222</span> testfile &lt;SERVER HOSTNAME&gt;:/tmp
</code></pre></div>

</li>
<li>
<p>Connect to the server via SFTP and grab files:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> gsisftp -P <span class="m">2222</span> &lt;SERVER HOSTNAME&gt;
<span class="gp">user@host $</span> <span class="nb">cd</span> /tmp
<span class="gp">user@host $</span> get testfile
</code></pre></div>

</li>
</ol>
</li>
</ol>
<h2 id="htcondor-ce-collector-wip">HTCondor-CE Collector (WIP)<a class="headerlink" href="#htcondor-ce-collector-wip" title="Permanent link">&para;</a></h2>
<p>The CE Collector is a stripped-down version of HTCondor-CE that contains mostly just the collector daemon and configs. It was introduced in htcondor-ce-1.6. The production CE Collectors run at the GOC, but you may want to set up your own for testing.</p>
<ol>
<li>Make 2 VMs with the EPEL/OSG repos installed: one for the collector, and one for the CE</li>
</ol>
<h3 id="setting-up-the-collector">Setting Up the Collector<a class="headerlink" href="#setting-up-the-collector" title="Permanent link">&para;</a></h3>
<ol>
<li>Install <code>htcondor-ce-collector</code></li>
<li>
<p>Create a file called <code>/etc/condor-ce/config.d/99-local.conf</code> that contains this line:<pre class='file'></p>
<div class="codehilite"><pre><span></span><code>COLLECTOR.ALLOW_ADVERTISE_SCHEDD = $(COLLECTOR.ALLOW_ADVERTISE_SCHEDD), your_htcondor_ce_host.example.net&lt;/pre&gt;
</code></pre></div>

<p>(with <code>your_htcondor_ce_host</code> replaced by the hostname the HTCondor-CE VM)</p>
</li>
<li>
<p>Run <code>service condor-ce-collector start</code></p>
</li>
</ol>
<h3 id="setting-up-the-ce">Setting Up the CE<a class="headerlink" href="#setting-up-the-ce" title="Permanent link">&para;</a></h3>
<ol>
<li>Install <code>osg-htcondor-ce-condor</code> (replace condor with the batch system of your choice)</li>
<li>Ensure osg-configure &gt;= 1.0.60-2 is installed</li>
<li>
<p>Configure your CE using osg-configure</p>
<ol>
<li>You should use the <a href="https://www.opensciencegrid.org/docs/compute-element/install-htcondor-ce/">HTCondor-CE Install Docs</a> as a reference, although you can skip several of the steps</li>
<li>You can skip setting up Squid: set <code>enabled</code> to <code>True</code> and <code>location</code> to <code>UNAVAILABLE</code> in <code>01-squid.ini</code></li>
<li>Set <code>htcondor_gateway_enabled</code> to <code>True</code> in <code>10-gateway.ini</code></li>
<li>You probably don't need GUMS, but if you want it, use the Fermi GUMS server (set <code>gums_host</code> to <code>gums.fnal.gov</code> and <code>authorization_method</code> to <code>xacml</code> in 10-misc.ini)</li>
<li>
<p>To keep osg-configure from complaining about storage, edit <code>10-storage.ini</code>:</p>
<ul>
<li>Set <code>se_available</code> to <code>False</code></li>
<li>Set <code>app_dir</code> to <code>/osg/app_dir</code></li>
<li>Set <code>data_dir</code> to <code>/osg/data_dir</code></li>
<li>Do <code>mkdir -p /osg/app_dir/etc; mkdir -p /osg/data_dir; chmod 1777 /osg/app_dir{,/etc}</code></li>
</ul>
</li>
<li>
<p>Enable your batch system by setting <code>enabled</code> to <code>True</code> in <code>20-&lt;batch system&gt;.ini</code></p>
</li>
<li>Set up the site info in <code>40-siteinfo.ini</code> ; in particular, you'll need to set the <code>resource</code> and <code>resource_group</code> settings
    \ (you just need to pick a name; I concatenate my login name with the short host name and use that, e.g. matyasfermicloud001).
    \ You can also use the following settings:<ul>
<li><code>group=OSG-ITB</code></li>
<li><code>sponsor=local</code></li>
<li><code>city=Batavia, IL</code></li>
<li><code>country=US</code></li>
<li><code>longitude=-88</code></li>
<li><code>latitude=41</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p>Edit the file <code>/etc/osg/config.d/30-infoservices.ini</code> and set <code>ce_collectors</code> to the collector host</p>
</li>
<li>Run <code>osg-configure -dc</code></li>
<li>Start up your batch system</li>
<li>Run <code>service condor-ce start</code></li>
</ol>
<p>The CE will report to the collector host every five minutes. If you want to force it to send now, run <code>condor_ce_reconfig</code>. You should see your CE if you run <code>condor_ce_status -schedd</code> on the collector host.</p>
<h2 id="rsv">RSV<a class="headerlink" href="#rsv" title="Permanent link">&para;</a></h2>
<p>Testing a fresh installation:</p>
<ol>
<li>make sure the yum repositories required by OSG is installed on your host<ul>
<li>rpm -Uvh <a href="http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el7-release-latest.rpm">http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el7-release-latest.rpm</a> OR rpm -Uvh <a href="http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm">http://repo.opensciencegrid.org/osg/3.4/osg-3.4-el6-release-latest.rpm</a></li>
<li>also make sure epel repo is set up. </li>
</ul>
</li>
<li>install the rpm<ul>
<li>yum --enablerepo=osg-testing install rsv </li>
</ul>
</li>
<li>edit /etc/osg/config.d/30-rsv.ini file<ul>
<li>in my case, I don't have a service cert for testing, so I use my own personal cert to create the proxy, but later on the owner of the proxy should be changed to "rsv" user that is created during the rpm install.</li>
<li>in the config file, for the ce_hosts and gridftp_hosts, put in a test server, as the result from this test will be uploaded to OSG GOC, which may mess up your production service monitoring if you chose a production server for the test.</li>
</ul>
</li>
<li>osg-configure -v</li>
<li>osg-configure -c</li>
<li>/etc/init.d/condor-cron start</li>
<li>/etc/init.d/rsv start</li>
<li>rsv-control --list</li>
<li>rsv-control --version</li>
<li>rsv-control --run --all-enabled 11. make sure the results from the above commands look fine.</li>
</ol>
<p>Testing an upgrade installation:</p>
<ol>
<li>make sure to enable the osg-testing repo, and set its priority higher than the other repos</li>
<li>yum --enablerepo=osg-testing upgrade rsv*</li>
<li>you can use the old 30-rsv.ini file for configuration</li>
<li>repeat steps 4)~11) as mentioned in the last section.</li>
</ol>
<h2 id="slurm">Slurm<a class="headerlink" href="#slurm" title="Permanent link">&para;</a></h2>
<p>This section goes through the steps needed to set up a slurm install on a VM. This is a necessary prerequisite for testing Slurm related components (CE integration, gratia, etc.). Note that the slurm setup used for this uses weak passwords for mysql. It should be sufficient for a quick setup, testing, and then tear down but should not be used without changes if it will be running for any appreciable length of time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>need to have a VM with 2+ GB of memory</p>
</div>
<h3 id="installation-and-setup">Installation and setup<a class="headerlink" href="#installation-and-setup" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Download scripts and config files: </p>
<div class="codehilite"><pre><span></span><code>cd /tmp/
git clone &lt;https://github.com/sthapa/utilities.git&gt;
cd utilities/slurm
</code></pre></div>

</li>
<li>
<p>setup and install slurm components</p>
<div class="codehilite"><pre><span></span><code>export username=&#39;USERNAME&#39; \# user that jobs will run as
export version=&#39;14.11.7&#39; \# slurm version to install (e.g. 16.05.2 or 14.11.7)
./slurm-setup.sh
</code></pre></div>

</li>
<li>
<p>After successful completion, slurm and slurm gratia probes should be setup and enabled.</p>
</li>
</ol>
<h3 id="running-a-job-using-slurm">Running a job using slurm<a class="headerlink" href="#running-a-job-using-slurm" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Generate test.sh with the following:</p>
<div class="codehilite"><pre><span></span><code>#/bin/bash
echo &quot;In the directory: `pwd`&quot; echo &quot;As the user: `whoami`&quot; echo Hostname:&quot; /bin/hostname sleep 60 &lt;/pre&gt;
</code></pre></div>

</li>
<li>
<p>run <code>sbatch test.sh</code></p>
</li>
<li>the output from the jobs should appear in the current working directory as <code>test.sh.[eo].nnnnn</code> where nnnnn is a job id</li>
</ol>
<h2 id="vo-client">VO Client<a class="headerlink" href="#vo-client" title="Permanent link">&para;</a></h2>
<p>This document contains a basic recipe for testing a VO Package release</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<p>Testing the VO package requires a few components:
   * X.509 certificate with membership to at least one VO
   * System with working GUMS installation
   * System with OSG installation (voms-proxy-init and edg-mkgridmap)</p>
<h3 id="testing-voms-proxy-init">Testing <code>voms-proxy-init</code><a class="headerlink" href="#testing-voms-proxy-init" title="Permanent link">&para;</a></h3>
<p>Login in the system that has voms-proxy-init installed.  Make sure that you have the correct 
vo-client rpms installed and that your X.509 certificate is in your home directory.  For each
VO that you have membership in, run the following <code>voms-proxy-init -voms [VO]</code> where <code>[VO]</code> is 
the appropriate VO (e.g. osg, cms, etc.).  You should be able to generate a voms-proxy for that
VO without errors.</p>
<h2 id="xrootd-voms-testing">XRootD VOMS Testing<a class="headerlink" href="#xrootd-voms-testing" title="Permanent link">&para;</a></h2>
<p>This section is intended for OSG Software/Release teams to gather information on testing vomsxrd/xrootd-voms-plugin package. Original plugin named <a href="http://gganis.github.io/vomsxrd/">vomsxrd</a>, similar to lcmaps that extracts information for authorization within xrootd of a proxy's voms extension.</p>
<p>You need an <a href="https://www.opensciencegrid.org/docs/data/xrootd/install-storage-element/">xrootd server installation</a></p>
<p>In the xrootd server yum install the following packages:</p>
<ul>
<li>xrootd</li>
<li>xrootd-voms-plugin</li>
<li>vo-client</li>
</ul>
<p>In the xrootd client yum install the following packages:</p>
<ul>
<li>xrootd-client</li>
<li>voms-clients</li>
<li>vo-client</li>
</ul>
<p>In the xrootd server add this lines to file <code>/etc/xrootd/xrootd-clustered.cfg</code></p>
<div class="codehilite"><pre><span></span><code>xrootd.seclib /usr/lib64/libXrdSec.so
sec.protparm gsi -vomsfun:/usr/lib64/libXrdSecgsiVOMS.so -vomsfunparms:certfmt=raw|vos=cms|dbg -vomsat:2
sec.protocol /usr/lib64 gsi -ca:1 -crl:3
</code></pre></div>

<p>This configuration will only authorize members of VO <strong>cms</strong>. You can change it to another VO.</p>
<p>Make sure <code>fetch-crl</code> has been run otherwise the xrootd service may fail to start.</p>
<p>In the xrootd client get a proxy without voms extension or with another VO extension different that the one used in the configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> voms-proxy-init -voms mis
<span class="go">Enter GRID pass phrase:</span>
<span class="go">Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</span>
<span class="go">Creating temporary proxy ........................... Done</span>
<span class="go">Contacting  voms.opensciencegrid.org:15001 [/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=http/voms.opensciencegrid.org] &quot;mis&quot; Done</span>
<span class="go">Creating proxy ............................................... Done</span>
<span class="gp">user@host $</span> xrdcp vomsxrdtest root://fermicloud024.fnal.gov:1094//tmp/
<span class="go">[0B/0B][100%][==================================================][0B/s]  </span>
<span class="go">Run: [FATAL] Auth failed</span>
</code></pre></div>

<p>Now get a proxy with cms extension and run it again:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> voms-proxy-init -voms cms
<span class="go">Enter GRID pass phrase:</span>
<span class="go">Your identity: /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</span>
<span class="go">Creating temporary proxy ...................................... Done</span>
<span class="go">Contacting  voms2.cern.ch:15002 [/DC=ch/DC=cern/OU=computers/CN=voms2.cern.ch] &quot;cms&quot; Done</span>
<span class="go">Creating proxy .......................................... Done</span>
<span class="go">Your proxy is valid until Thu Dec  4 22:53:29 2014</span>
<span class="gp">user@host $</span> xrdcp vomsxrdtest root://fermicloud024.fnal.gov:1094//tmp/
<span class="go">[0B/0B][100%][==================================================][0B/s] </span>
</code></pre></div>

<h2 id="hdfs">HDFS<a class="headerlink" href="#hdfs" title="Permanent link">&para;</a></h2>
<h3 id="hadoop-name-node-installation">Hadoop name node installation<a class="headerlink" href="#hadoop-name-node-installation" title="Permanent link">&para;</a></h3>
<p>Use the following script with option 1:</p>
<div class="codehilite"><pre><span></span><code>#!/bin/bash
set -e

select NODETYPE in namenode datanode gridftp; do
  [[ $NODETYPE ]] &amp;&amp; break
done
case $NODETYPE in
  namenode ) NAMENODE=$HOSTNAME ;;
         * ) read -p &#39;hostname for NAMENODE? &#39; NAMENODE ;;
esac
echo NODETYPE=$NODETYPE
echo NAMENODE=$NAMENODE
read -p &#39;ok? [y/N] &#39; ok
case $ok in
  y*|Y*) ;;  # ok
      *) exit ;;
esac
#yum install --enablerepo=osg-minefield osg-se-hadoop-$NODETYPE
yum install osg-se-hadoop-$NODETYPE
case $NODETYPE in
  namenode|datanode )
    mkdir -p /data/{hadoop,scratch,checkpoint}
    chown -R hdfs:hdfs /data
    sed -i s/NAMENODE/$NAMENODE/ /etc/hadoop/conf.osg/{core,hdfs}-site.xml
    cp /etc/hadoop/conf.osg/{core,hdfs}-site.xml /etc/hadoop/conf/
    touch /etc/hosts_exclude
    ;;
  gridftp )
    ln -snf conf.osg /etc/hadoop/conf
    sed -i s/NAMENODE/$NAMENODE/ /etc/hadoop/conf.osg/{core,hdfs}-site.xml
    echo &quot;hadoop-fuse-dfs# /mnt/hadoop fuse server=$NAMENODE,port=9000,rdbuffer=131072,allow_other 0 0&quot; &gt;&gt; /etc/fstab
    mkdir /mnt/hadoop
    mount /mnt/hadoop
    cp -v /etc/redhat-release /mnt/hadoop/test-file
    sed -i &#39;/globus_mapping/s/^# *//&#39; /etc/grid-security/gsi-authz.conf
    sed -i s/yourgums.yourdomain/gums.fnal.gov/ /etc/lcmaps.db
    mkdir /mnt/hadoop/fnalgrid
    useradd fnalgrid -g fnalgrid
    chown fnalgrid:fnalgrid /mnt/hadoop/fnalgrid
    service globus-gridftp-server start
    if type -t globus-url-copy &gt;/dev/null; then
      globus-url-copy file:////bin/bash  gsiftp://$HOSTNAME/mnt/hadoop/fnalgrid/first_test
    else
      echo globus-url-copy not installed
    fi
    ;;
esac
case $NODETYPE in
  namenode ) su - hdfs -c &quot;hadoop namenode -format&quot; ;;
esac
service hadoop-hdfs-$NODETYPE start
</code></pre></div>

<h3 id="edit-configuration">Edit Configuration<a class="headerlink" href="#edit-configuration" title="Permanent link">&para;</a></h3>
<ol>
<li>Edit /etc/hadoop/conf/hdfs-site.xml<ul>
<li>set dfs.replication to 1   </li>
<li>set dfs.replication.min to 1</li>
</ul>
</li>
</ol>
<h3 id="hadoop-data-node-installation">Hadoop data node installation<a class="headerlink" href="#hadoop-data-node-installation" title="Permanent link">&para;</a></h3>
<ol>
<li>Run same script as before but with option number 2.</li>
</ol>
<h3 id="gridftp-installation">GridFTP installation<a class="headerlink" href="#gridftp-installation" title="Permanent link">&para;</a></h3>
<p>Run same as script but with option number 3.</p>
<h3 id="on-the-name-node">On the name node<a class="headerlink" href="#on-the-name-node" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="gp">[root@fermicloud092 ~]#</span> hdfs dfs -ls /test-file
<span class="go">Found 1 items</span>
<span class="go">-rw-r--r--   2 root root          0 2014-07-21 15:57 /test-file</span>
</code></pre></div>

<h3 id="on-the-name-node_1">On the name node<a class="headerlink" href="#on-the-name-node_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="gp">[root@]#</span> hadoop fs -mkdir /matyas
<span class="gp">[root@]#</span> hadoop fs -chown matyas /matyas
<span class="gp">[root@]#</span> hdfs dfsadmin -setSpaceQuota 123k /matyas
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>/tmp/blob <span class="nv">bs</span><span class="o">=</span><span class="m">4096</span> <span class="nv">count</span><span class="o">=</span><span class="m">10000</span>
<span class="gp">user@host $</span> kx509<span class="p">;</span> voms-proxy-init -noregen -voms fermilab
<span class="gp">user@host $</span> globus-url-copy -vb file:///tmp/blob gsiftp://<span class="sb">`</span>hostname -f<span class="sb">`</span>/mnt/hadoop/matyas
</code></pre></div>

<h2 id="xrootd-plugins">XRootD Plugins<a class="headerlink" href="#xrootd-plugins" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Install xrootd-server:</p>
<div class="codehilite"><pre><span></span><code>yum install xrootd-server
</code></pre></div>

</li>
<li>
<p>Install xrootd-plugins</p>
<div class="codehilite"><pre><span></span><code>yum install xrootd-cmstfc xrootd-hdfs
</code></pre></div>

</li>
</ol>
<p>Modify the file <code>/etc/xrootd/xrootd-clustered.cfg</code> to look like this:</p>
<div class="codehilite"><pre><span></span><code>xrd.port 1094

# The roles this server will play.                                                                                            
all.role server
all.role manager if xrootd.unl.edu
# The known managers                                                                                                          
all.manager srm.unl.edu:1213
#all.manager xrootd.ultralight.org:1213                                                                                       

# Allow any path to be exported; this is further refined in the authfile.                                                     
all.export / nostage

# Hosts allowed to use this xrootd cluster                                                                                    
cms.allow host *

### Standard directives                                                                                                       
# Simple sites probably don&#39;t need to touch these.                                                                            
# Logging verbosity                                                                                                           
xrootd.trace all -debug
ofs.trace all -debug
xrd.trace all -debug
cms.trace all -debug

# Integrate with CMS TFC, placed in /etc/storage.xml                                                                          
oss.namelib /usr/lib64/libXrdCmsTfc.so file:/etc/xrootd/storage.xml?protocol=hadoop

xrootd.seclib /usr/lib64/libXrdSec.so
xrootd.fslib /usr/lib64/libXrdOfs.so
ofs.osslib /usr/lib64/libXrdHdfs.so
all.adminpath /var/run/xrootd
all.pidpath /var/run/xrootd

cms.delay startup 10
cms.fxhold 60s
cms.perf int 30s pgm /usr/bin/XrdOlbMonPerf 30

oss.space default_stage /opt/xrootd_cache
</code></pre></div>

<p>Create file <code>/etc/xrootd/storage.xml</code> and place this:</p>
<div class="codehilite"><pre><span></span><code>&lt;storage-mapping&gt;
&lt;lfn-to-pfn protocol=&quot;hadoop&quot; destination-match=&quot;.*&quot; path-match=&quot;.*/+tmp2/test-file&quot; result=&quot;/test-file&quot;/&gt;
&lt;/storage-mapping&gt;
</code></pre></div>

<p>For el7 the instrucctions are a little bit different. See:</p>
<p><a href="https://jira.opensciencegrid.org/browse/SOFTWARE-2198?focusedCommentId=334667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-334667">https://jira.opensciencegrid.org/browse/SOFTWARE-2198?focusedCommentId=334667&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-334667</a></p>
<p>Now from a node do:</p>
<div class="codehilite"><pre><span></span><code><span class="go">xrdcp --debug 3 root://yourdatanode.yourdomain:1094//tmp2/test-file .</span>
</code></pre></div>

<p>If it is sucessful it would have tested both cmstfc and hdfs plugins </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../empty-pkgs/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Empty Packages
              </div>
            </div>
          </a>
        
        
          <a href="../../policy/gridftp-gsi-migration/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                GridFTP and GSI Migration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>